\chapter{Compactness}

\section{Compact Metric Spaces}

\begin{exercise}{1}
    If $K$ is a nonempty compact subset of $\mathbb{R}$, show that $\sup K, \inf K$ are elements of $K$.
\end{exercise}

\begin{solution}
    
    First, observe that $\sup K$ is a well-defined real number since $K$ is (totally) bounded.
    Second, recall the $\epsilon$-based characterization of the supremum: for every $\epsilon > 0$, there exists $x \in K$ such that $x > \sup K - \epsilon$.    
    Form then a sequence $(x_n) \subset K$ such that $x_n > \sup K - \frac{1}{n}$, and notice that this converges to the supremum.
    Because $K$ is also closed, it must be that $\sup K \in K$ as a limit point.
    The proof for the infimum is exactly symmetrical.
\end{solution}

\begin{exercise}{2}
    Let $E = \{x \in \mathbb{Q} : 2 < x^2 < 3 \}$, considered as a subset of $\mathbb{Q}$ (with its usual metric).
    Show that $E$ is closed and bounded but \textit{not} compact.
\end{exercise}

\begin{solution}
    
    First, we notice that any element $x \in E$ must be such that $\sqrt{2} < \lvert x \rvert < \sqrt{3}$.
    This means that for any two $x, y \in E$:

    \[\sqrt{2} < \lvert x \rvert < \sqrt{3}, \sqrt{2} < \lvert y \rvert < \sqrt{3} \implies -\sqrt{2} < x < \sqrt{3}, -\sqrt{3} < -y < \sqrt{2} \implies \]
    \[ -(\sqrt{3} + \sqrt{2}) < x - y < \sqrt{3} + \sqrt{2} \implies \lvert x - y \rvert < \sqrt{3} + \sqrt{2}\]

    This shows that $E$ is indeed bounded (has bounded diameter).
    To show that it is closed, suppose $(x_n) \subset E$ converges to some $x \in \mathbb{Q}$.
    Suppose that it was the case that $x^2 > 3$.
    By the continuity of the squaring function, we have that $x_n^2 \rightarrow x^2$, and this then means that the terms $x_n^2$ get infinitely close to $3 + \epsilon$, and thus more specifically eventually become larger than 3, a contradiction.
    Similarly, it cannot be that $x^2 < 2$.
    The only possibilities that remain for $x \notin E$ are $x^2 = 2$ or $x^2 = 3$.
    Suppose $x^2 = 2$.
    This would mean that $x_n^2 \rightarrow x^2$, and by the continuity of the square root function we would have that $x_n \rightarrow \sqrt{2}$.
    However, $\sqrt{2}$ is \textit{not} a rational, which is a contradiction since we began with the assumption that $x_n$ converges to some limit in the metric space.
    The same holds for $x^2 = 3$.
    Therefore $x \in E$ always, and thus $E$ is closed.
    However, consider the sequence constructed as follows.
    Start with $x_1 = 3/2 \in E$. 
    Between any two real numbers we can always find a rational number, and so pick $x_2$ to be between $\sqrt{2}, (\sqrt{2} + x_1)/2$.
    Continue this way to form a sequence that is Cauchy: the distance between subsequent terms is iteratively divided by two.
    Nevertheless, as observed above this sequence does \textit{not} converge in $\mathbb{Q}$.
    In fact all its subsequences converge to $\sqrt{2}$, so none of them can converge in $\mathbb{Q}$, and thus more specifically in $E$, and thus by theorem 8.2, $E$ is not compact.
\end{solution}

\newpage

\begin{exercise}{3}
    If $A$ is compact in $M$, prove that $\text{diam}(A)$ is finite.
    Moreover, if $A$ is nonempty, show that there exist points $x, y \in A$ such that $\text{diam}(A) = d(x, y)$.
\end{exercise}

\begin{solution}
    
    Because $A$ is compact, it must be totally bounded, and hence also bounded.
    We've seen this (totally bounded $\implies$ bounded) in Example 7.2 (a) and provided a proof in Ex. 2 of Ch. 7.
    Therefore, $A$ has finite diameter.
    Now suppose $A$ is nonempty.
    We know that $\text{diam}(A) = \sup\{d(x, y), x, y \in A\}$ is finite.
    By the definition of the supremum, for every $\epsilon > 0$, there exist $x, y \in A$ such that $d(x, y) > \text{diam}(A) - \epsilon$.
    For successive $\epsilon_i = \frac{1}{i}$, find $x_i, y_i$ such that $d(x_i, y_i) > \text{diam}(A) - \epsilon_i$.
    Form two sequences, $(x_i), (y_i) \subset A$.
    Because $A$ is compact, by Theorem 8.2, the sequence $(x_i)$ contains a convergent subsequence $x_{i_k} \rightarrow x \in A$.
    Select the corresponding subsequence $(y_{i_k})$ that satisfies the above inequality when paired with $(x_{i_k})$.
    Notice that again by Theorem 8.2, we can select a sub-subsequence $(y_{{i_k}_{l}})$ such that $y_{{i_k}_l} \rightarrow y \in A$.
    Of course, a subsequence of a convergent subsequence converges, so take also the corresponding $(x_{{i_k}_l})$, which converges to $x$.
    By our initial inequality above we have $d(x_{{i_k}_l}, y_{{i_k}_l}) \rightarrow \text{diam}(A)$, .
    By Exercise 34, Ch. 3, we know that $d(x_{{i_k}_l}, y_{{i_k}_l}) \rightarrow d(x, y)$, and thus by the uniqueness of the limit we conclude that $d(x, y) = \text{diam}(A)$.
\end{solution}

\begin{exercise}{4}
    If $A, B$ are compact sets in $M$, show that $A \cup B$ is compact.
\end{exercise}

\begin{solution}
    
    Let $(c_i) \subset A \cup B$ be a non-trivial sequence (i.e., not eventually constant).
    If $(c_i)$ contains an infinite number of terms $a_i \in A$, then this sequence of $a_i$ has a subsequence that converges to a point in $A$, since $A$ is compact.
    A subsequence of a subsequence is also a subsequence of the sequence itself, and thus $(c_i)$ contains a sequence converging to a point in $A \cup B$.
    If $(c_i)$ contains only a finite number of terms from $A$, then it contains an infinite number of terms from $B$, and we use the same argument to show that it contains a subsequence converging to a point in $B$.
    Therefore, $A \cup B$ is compact, by Theorem 8.2.
\end{solution}

\begin{exercise}{6}
    If $A$ is compact in $M$ and $B$ is compact in $N$, show that $A \times B$ is compact in $M \times N$ (see Exercise 3.46).
\end{exercise}

\begin{solution}
    
    Let $((x_i, y_i)) \subset A \times B$ be a sequence.
    By Theorem 8.2, $(x_i) \subset A$ has a convergent subsequence $(x_{i_k}) \subset A$, such that $x_{i_k} \rightarrow x \in A$, since $A$ is compact in $M$.
    Take the subsequence $(y_{i_k}) \subset B$.
    Again, because $B$ is compact in $N$, there exists $(y_{i_{k_l}}) \subset B$ such that $y_{i_{k_l}} \rightarrow y \in B$.
    Any subsequence of $(x_{i_k})$ converges to $x$, so take the corresponding $x_{i_{k_l}} \rightarrow x$.
    By Exercise 3.46, the sequence $((x_{i_{k_l}}, y_{i_{k_l}})) \subset A \times B$ converges to $(x, y) \in A \times B$.
    Since this is a subsequence of $((x_i, y_i))$, we 've shown that $A \times B$ is compact in $M \times N$.
\end{solution}

\begin{exercise}{10}
    Show that the Heine-Borel theorem (closed, bounded sets in $\mathbb{R}$ are compact) implies the Bolzano-Weierstrass theorem.
    Conclude that the Heine-Borel theorem is equivalent to the completeness of $\mathbb{R}$.
\end{exercise}

\begin{solution}
    
    The Bolzano-Weierstrass theorem states that every bounded infinite subset of $\mathbb{R}$ has a limit point in $\mathbb{R}$.
    Suppose $A$ is such a subset, and consider its closure, $\overline{A}$, which must also be bounded (if not, due to the definition of the closure, there would be points of $A$ infinitely close to points of $\partial A$ that form an unbounded sequence, a contradiction).
    Because $\overline{A}$ is also closed, then by our assumption of the Heine-Borel theorem, it is compact.
    Then Theorem 8.2 guarantees that every sequence in $A \subset \overline{A}$ has a subsequence converging to a point in $\overline{A}$, which means we've shown the Bolzano-Weierstrass theorem.
    Observe, also, that what we've shown implies the completeness of the reals: any Cauchy sequence in $\mathbb{R}$ has a bounded infinite range, and hence has a convergent subsequence, which for a Cauchy sequence means that it itself converges.

    For a stronger version of this exercise, we work with the hypothesis that any closed \textit{interval} $[a, b]$ is compact.
    For a bounded, infinite subset of $\mathbb{R}$ we know that it has \textit{a} lower bound $m$, and \textit{an} upper bound $M$, which means $A \subset [m, M]$.
    Importantly, we do not assume that least upper bounds or greatest lower bounds exist, since this is the axiom of completeness.
    This interval is compact by our hypothesis.
    Thus, for any sequence in $A \subset [m, M]$, we can use theorem 8.2 to obtain a sequence with a subsequence converging to a point in $[m, M] \subset \mathbb{R}$, thus showing the Bolzano-Weierstrass theorem again.

\end{solution}

\begin{exercise}{11}
    Prove that compactness is not a relative property.
    That is, if $K$ is compact in $M$, show that $K$ is compact in \textit{any} metric space that contains it (isometrically).
\end{exercise}

\begin{solution}
    
    Let $(N, \rho)$ be any metric space such that for a subset $L \subset N$ it holds that $i: K \rightarrow L$ is an isometry onto $L$. 
    We need to show that $L$ is compact in $N$.
    Pick any sequence $(y_i) \subset L$.
    Because $K, L$ are isometric, there exists a unique sequence $(x_i) \subset K$ such that $i(x_i) = y_i$.
    Now, since $K$ is compact in $M$, by Theorem 8.2, $(x_i)$ contains a convergent subsequence $(x_{i_k})$ such that $x_{i_k} \rightarrow^{d} x \in K$.
    Notice now that $i$ is a homeomorphism, and thus $i(x_{i_k}) \rightarrow^{\rho} i(x)$, which means $y_{i_k} \rightarrow^{\rho} i(x)$.
    Because $i$ is onto, $i(x) \in L$.
    We've therefore shown that $(y_i)$ contains a convergent subsequence $y_{i_k} \rightarrow^{\rho} i(x) \in L$, which by Theorem 8.2 means that $L$ is compact in $(N, \rho)$.
\end{solution}

\begin{exercise}{12}
    Show that the set $A = \{x \in l_2: \lvert x_n \rvert \leq 1/n, n = 1, 2, \ldots\}$ is compact in $l_2$.
    [Hint: First show that $A$ is closed.
    Next, use the fact that $\sum_{n=1}^{\infty} 1/n^2 < \infty$ to show that $A$ is ``within $\epsilon$'' of the set $A \cap \{x \in l_2: \lvert x_n \rvert = 0, n \geq N\}$.]
\end{exercise}

\begin{solution}
    
    We know (Example 7.7) that $l_2$ is complete.
    Therefore, if we show that $A$ is closed, we have that it will also be complete (Theorem 7.9).
    Suppose $(x_k)_n \subset A$ is a sequence of sequences that converges to $x \in l_2$.
    Then, for any $\epsilon > 0$, there exists $N > 0$ such that for all $n \geq N$ we have that:

    \[(\sum_{k=1}^{\infty} \lvert x_{nk} - x_k \rvert^2)^{1/2} < \epsilon \implies \sum_{k=1}^{\infty} \lvert x_{nk} - x_k \rvert^2 < \epsilon^2\]

    Therefore, for any $k$ we have that:
    
    \[\lvert x_{nk} - x_k \rvert^2 < \epsilon^2 \implies \lvert x_{nk} - x_k \rvert < \epsilon \implies x_{nk} - \epsilon < x_k < x_{nk} + \epsilon\]

    By the definition of $A$, we have that $\lvert x_{nk} \rvert \leq 1/k$.
    Therefore, $-1/k - \epsilon < x_k < 1/k + \epsilon \implies \lvert x_k \rvert < 1/k + \epsilon$
    Because this holds for \textit{any} $\epsilon > 0$, we conclude that it must be the case that $\lvert x_k \rvert \leq 1/k$ for all $k$.
    But this is precisely the defining property of $A$, and so $x \in A$, showing that $A$ is indeed closed.
    Now we need to show that $A$ is totally bounded.
    We begin by selecting an $N > 0$ and examining sequences of the form $(x_1, x_2, \ldots x_{N - 1}, 0 , 0, \ldots)$.
    In particular, consider the following construction.
    We subdivide each of the intervals $[-1, 1], [-1/2, 1/2], \ldots, [-1/(N - 1), 1/(N - 1)]$ into $N$ intervals of equal length.
    For the $i$-th of these intervals, this yields $N + 1$ endpoints, $x_{i, 1}, x_{i, 2}, \ldots, x_{i, N + 1}$.
    We then form the set:
    
    \[B = \]
    \[\{(x_{i_1, 1}, x_{i_2, 2}, \ldots x_{i_{N-1}, N-1}, 0, \ldots), i_1 \in \{1, 2, \ldots, N + 1\}, i_2 \in \{1, 2, \ldots, N + 1\}, \ldots, i_{N-1} \in \{1, 2, \ldots, N + 1\}\}\]

    Notice that $B$ contains a finite number of points ($(N + 1)^{N-1}$).
    Furthermore, suppose $(y_k) \in A$ is a sequence.
    Take the element $z$ of $B$ formed by selecting, for each of the $N - 1$ first coordinates, the nearest element $z_i = x_{i, j} \in B$ to $y_i$.
    Then observe that $\lvert y_i - z_i \rvert < 2/(Ni)$, because we subdivided the interval $[-1/i, 1/i]$ into $N$ equally long subintervals.
    Then:

    \[\sum_{k=1}^{\infty} \lvert y_k - z_k \rvert^2 = \sum_{k = 1}^{N - 1} \lvert y_k - z_k \rvert^2 + \sum_{k=N}^{\infty} \lvert y_k - 0 \rvert^2  \leq \sum_{k=1}^{N-1} 4/(Nk)^2 + \sum_{k=N}^{\infty} \lvert y_k \rvert^2 = \frac{4}{N^2} \sum_{k=1}^{N-1} \frac{1}{k^2} + \sum_{k=N}^{\infty} \lvert y_k \rvert^2\]
    \[\leq \frac{4(N - 1)}{N^2} + \sum_{k=N}^{\infty} \lvert y_k \rvert^2\]

    Now notice that because $(y_k) \in l_2$, the second term of the sum can be made arbitrarily small by selecting $N$ sufficiently large (the sequence of partial sums must converge).
    Secondly, the first part of the sum can also be easily seen to tend to zero as $N$ grows large.
    In particular, one can then select $N$ large enough so that each of these is upper bound by $\epsilon/2$, which by the above means $d(y, z) < \epsilon$, i.e., that $B$ constitutes a finite $\epsilon$-net for $A$, which shows that $A$ is totally bounded.
    Since it was also shown to be complete in $l_2$, it is thus compact in $l_2$.
\end{solution}

\begin{exercise}{13}
    Given $c_n \geq 0$ for all $n$, prove that the set $\{x \in l_2: \lvert x_n \rvert \leq c_n, n \geq 1\}$ is compact in $l_2$ if and only if $\sum_{n=1}^{\infty} c_n^2 < \infty$.
\end{exercise}

\begin{solution}
    
    $\implies$: Suppose first that $S = \{x \in l_2 : \lvert x_n \rvert \leq c_n, n \geq 1\}$ is compact in $l_2$.
    By Corollary 8.3, it must then be closed in $l_2$.
    Consider now forming the sequence of sequences $(c_n)_k = (c_1, c_2, \ldots, c_k, 0 ,0, \ldots)$, where all coordinates after the $k$-th one are zero.
    Importantly, $(c_n)_k \subset S$, and because $S$ is compact, by Theorem 8.2, $(c_n)_k$ contains a subsequence that converges to an element $L = (L_1, L_2, \ldots)$ of $S$.
    Our claim is now that $L = (c_1, c_2, \ldots)$.
    Notice that if we can prove this, then we immediately obtain that $\sum_{n=1}^{\infty} c_n^2 < \infty$: because $S$ is closed, $L \in S \subset l_2$, and so  $(c_1, c_2, \ldots) \in l_2$.
    Suppose then that for some $i, L_i \neq c_i \implies \lvert L_i - c_i \rvert = \epsilon > 0$.
    Any subsequence $(c_n)_{k_j}$ of $(c_n)_k$ must eventually contain terms of which the $i$-th coordinate equals $c_i$.
    Consequently, for sufficiently large $k_j$:

    \[\sum_{n=1}^{\infty} \lvert c_{k_j, n} - L_i \rvert^2 \geq \lvert c_{i} - L_i \rvert^2 > \epsilon^2\]

    This directly contradicts the fact that a subsequence of $(c_n)_k$ converges to $L$.
    By the argument presented above, this also shows that $(c_1, c_2, \ldots) \in l_2$.

    Because $S$ is closed, it must be the case that $(c_1, c_2, \ldots) \in S \subset l_2$, which means of course that $\sum_{n=1}^{\infty} c_n^2 < \infty$.

    $\impliedby$: We need to show that $S$ is both complete and totally bounded.
    We will do this in a similar manner as in Exercise 8.12.
    First, recall that $l_2$ is complete, and so for completeness it suffices to show that $S$ is closed.
    Suppose then $(x_n)_k \rightarrow (l_n)$ is a sequence of sequences in $S$ converging to $(l_n)$.
    To show that $(l_n) \in S$, we need to show that $\lvert l_n \rvert \leq c_n$ for all $n$.
    Suppose that this is not the case, and that for some $N, \lvert l_N \rvert > c_N$.
    Then let $\epsilon = \lvert l_N \rvert - c_N$.
    For any term of the sequence of sequences $(x_n)_k$ (i.e., for a fixed $k$), we obtain:

    \[\lvert x_{kN} \rvert \leq c_N \implies \lvert x_{kN} - l_N + l_N \rvert \leq c_N \implies \Bigl \lvert \lvert x_{kN} - l_N \rvert - \lvert l_N \rvert \Bigr \rvert \leq c_N\]
    \[\implies - c_N \leq \lvert x_{kN} - l_N \rvert - \lvert l_N \rvert \implies \lvert x_{KN} - l_N \rvert \geq \epsilon\]

    Notice that imposes a lower bound on $\lvert \lvert (x_n)_k - (l_n) \rvert \rvert_2$, which means that $(x_n)_k$ does \textit{not} converge to $(l_n)$, a contradiction.
    Therefore, $\lvert l_n \rvert < c_n$ for all $n$, and so $(l_n) \in S$, which means $S$ is closed in $l_2$ and thus complete.
    We now examine total boundedness.
    Once again, as in Ex. 8.12, we examine sequences of the form $(x_1, x_2, \ldots, x_{N - 1}, 0, 0, \ldots)$ for a fixed $N > 0$.
    In particular, we take the intervals $[-c_1, c_1], [-c_2, c_2], \ldots, [-c_{N - 1}, c_{N - 1}]$, and subdivide each into $N$ subintervals of equal length.
    Then the $i$-th interval is subdivided into $N$ subintervals, each of which has length $\frac{2c_i}{N}$ (note that if $c_i = 0$, everything collapses to a single point).
    We gather the endpoints of all intervals ($N + 1$ endpoints for the $i$-th interval, $x_{i, 1}, \ldots, x_{i, N + 1}$) and form the set:

    \[B = \{(x_{i_1, 1}, x_{_2, 2}, \ldots, x_{i_{N - 1}, N-1}, 0, 0, \ldots) \vert i_j \in \{1, 2, \ldots, N + 1\}, j = 1, 2, \ldots, N - 1\},\]

    which contains a finite number of points.
    Suppose now $(y_n) \in S$, and form the sequence $(z_n) \in B$ that has $z_i$ equal to the $x_{i, j}$ that is closest to $y_i$ for each $i = 1, \ldots, N -1$, and $z_i = 0$ for all other $i$.
    Notice that $\lvert y_i - z_i \rvert < 2c_i/N$ by our construction above.
    Then:

    \[\sum_{k=1}^{\infty} \lvert y_k - z_k \rvert^2 = \sum_{k = 1}^{N - 1} \lvert y_k - z_k \rvert^2 + \sum_{k = N}^{\infty} \lvert y_k - 0 \rvert^2 \leq \sum_{k = 1}^{N - 1} 4c_i^2/N^2 + \sum_{k = N}^{\infty} \lvert y_k \rvert^2 \leq \frac{4}{N^2} \sum_{k = 1}^{N - 1} c_i^2 + \sum_{k = N}^{\infty} \lvert y_k \rvert^2\]

    Because $y_k \in l_2$, the second term can be made arbitrarily small by selecting a sufficiently large $N$.
    Notice, also, that $\sum_{n=1}^{\infty}c_n^2 < \infty$, therefore the term $\sum_{k=1}^{N - 1} c_i^2$ is upper bound, and so again the first term of the inequality can be made arbitrarily small by selecting sufficiently large $N$ (so that $\frac{4}{N^2}$ becomes sufficiently small).
    We conclude that $\sum_{k=1}^{\infty} \lvert y_k - z_k \rvert^2$ can be upper bound by any arbitrarily small $\epsilon$, and so a set $B$ containing a sufficiently large but finite number of elements $z_k$ constitutes an $\epsilon$-net for $S$, showing that $S$ is totally bounded, and hence compact.
\end{solution}

\begin{exercise}{14}
    Show that the Hilbert cube $H^{\infty}$ is compact.
    [Hint: First show that $H^{\infty}$ is complete (Ex. 7.24).
    Now, given $\epsilon > 0$, choose $N$ so that $\sum_{n=N}^{\infty} 2^{-n} < \epsilon$ and argue that $H^{\infty}$ is ``within $\epsilon$'' of the set $\{x \in H^{\infty}: \lvert x_n \rvert = 0\}$ for $n \geq N$.]
\end{exercise}

\begin{solution}
    
    In Ex. 7.24, we showed that the Hilbert cube is complete.
    We now need to examine total boundedness as indicated in the hint.
    Pick any $\epsilon > 0$, and observe that we can find $N > 0$ such that $\sum_{n=N}^{\infty} 2^{-n} < \epsilon$: this is possible due to the series $1, 1 + 1/2, 1 + 1/2 + 1/4, \ldots$ converging.
    Consider also partitioning the interval $[-1, 1]$ into $N$ subintervals of equal length, as in Exercises 8.12, 8.13 above, collecting all endpoints $x_1, x_2, \ldots, x_{N+1}$ and forming the set:

    \[B = \{(x_{i, 1}, x_{i, 2}, \ldots, x_{i, N - 1}, 0, 0, \ldots): i_j \in \{1, 2, \ldots, N + 1\}, j = 1, \ldots, N - 1\} \subset H^{\infty}\]
    Let then $(y_n) \in H^{\infty}$, and let $(z_n) \in B$ be the element of $B$ such that $\lvert y_{i} - z_i \rvert$ is minimized for each $i = 1, \ldots, N - 1$ (i.e., for each $i$ we select the subinterval endpoint that is closest to $y_i$).
    Then $\lvert y_i - z_i \rvert < \frac{2}{N}$.
    Using the metric of $H^{\infty}$, we have that:

    \[d((y_n), (z_n)) = \sum_{n=1}^{\infty}2^{-n} \lvert y_n - z_n \rvert = \sum_{n = 1}^{N - 1} 2^{-n} \lvert y_n - z_n \rvert + \sum_{n = N}^{\infty} 2^{-n} \lvert y_n \rvert \leq \sum_{n=1}^{N-1}2^{-n}\frac{2}{N} + \sum_{n=N}^{\infty} 2^{-n}\]
    \[\leq \frac{4}{N} + \sum_{n=N}^{\infty} 2^{-n}\]

    where we used the fact that $\lvert y_n \rvert < 1$, and we upper-bounded the first term by the geometric series sum $1 + \frac{1}{2} + \frac{1}{4} + \ldots = 2$.
    Notice now that, as observed above, we can pick a sufficiently large $N$ such that the second term is made to be smaller than any $\epsilon > 0$.
    Furthermore, the first term again becomes smaller than any $\epsilon > 0$ for sufficiently large $N$.
    This shows that $d((y_n), (z_n))$ can in turn be made arbitrarily small, and thus that $B$ ---which contains a finite number of elements--- constitutes an $\epsilon$-net for $H^{\infty}$, thus showing that $H^{\infty}$ is totally bounded, and thus compact.
    
\end{solution}

\begin{exercise}{15}
    If $A$ is a totally bounded subset of a complete metric space $M$, show that $\overline{A}$ is compact in $M$.
    For this reason, totally bounded sets are sometimes called \textit{precompact} or \textit{conditionally compact}.
    In fact, any set with compact closure might be labeled precompact.
\end{exercise}

\begin{solution}
    
    By definition, we know that $\overline{A}$ is closed in the complete metric space $M$.
    Therefore, it is complete (Theorem 7.9).
    Furthermore, by Exercise 7.5, we know that $A$ is totally bounded iff $\overline{A}$ is totally bounded, and thus $\overline{A}$ is totally bounded, from which we can conclude that it is compact.
\end{solution}

\begin{exercise}{16}
    Show that a metric space $M$ is totally bounded if and only if its completion $\hat{M}$ is compact.
\end{exercise}

\begin{solution}

    $\implies$: By definition, $\hat{M}$ is complete, as a completion.
    To show that it is totally bounded, we have the following.
    For any $\epsilon > 0$, let $x_1, \ldots, x_n \in M$ be such that $M \subset \bigcup_{i=1}^{n} B_{\epsilon}^{d}(x_i)$, which is always feasible due to $M$ being totally bounded.
    Now, because $i:M \rightarrow \hat{M}$ is an isometry into $\hat{M}$, it is easy to see from the above that $i(M)$ is totally bounded.
    Take then any $\epsilon > 0$ and find $y_1, \ldots, y_n \in i(M)$ such that $i(M) \subset \bigcup_{i=1}^{n} B_{\epsilon/2}^{\hat{d}} (y_i)$.
    Because $i(M)$ is dense in $\hat{M}$, for any $y \in \hat{M}$ there exists $z \in i(M)$ such that $\hat{d}(y, z) < \epsilon/2$.
    But then since $z \in \bigcup_{i=1}^{n} B_{\epsilon/2}^{\hat{d}} (y_i)$, it must be the case that $d(z, y_i) < \epsilon/2$ for at least one $y_i$.
    Consequently:

    \[d(y, y_i) \leq d(y, z) + d(z, y_i) < \epsilon/2 + \epsilon/2 = \epsilon\]

    We conclude then that in fact $\hat{M} \subset \bigcup_{i=1}^{n} B_{\epsilon}^{\hat{d}} (y_i)$, which means that $\hat{M}$ is totally bounded and thus also compact.

    $\impliedby$: Conversely, assume $\hat{M}$ is compact.
    Then it is totally bounded, and thus any subset of it, more specifically $i(M)$, is totally bounded as well.
    By using the same argument as in the forward direction, we can show that $M$ is then also totally bounded.
\end{solution}

\begin{exercise}{17}
    If $M$ is compact, show that $M$ is also separable.
\end{exercise}

\begin{solution}
    
    By Exercise 7.10, we know that a totally bounded metric space is separable.
    Compact metric spaces are by definition totally bounded, and hence also separable.
\end{solution}

\begin{exercise}{19}
    Prove that $M$ is separable if and only if $M$ is homeomorphic to a totally bounded metric space (specifically, a subset of the Hilbert cube).
    [Hint: See Exercise 4.49.]
\end{exercise}

\begin{solution}
    
    $\implies$: Suppose $(M, \rho)$ is a separable metric space, and suppose, WLOG, that $\rho(x, y) \leq 1$.
    This is possible due to Exercise 3.42, where we proved that any metric is equivalent to a bounded metric.
    In Exercise 5.51 we showed that if $\{x_n: n \geq 1\}$ is a countable dense subset of $M$, the function $f(x) = (\rho(x, x_n))_{n=1}^{\infty}$ acts as a homeomorphism from $M$ into $H^{\infty}$, meaning that the image $f(M)$ is totally bounded as a subset of a totally bounded set ($H^{\infty}$).

    $\impliedby$: Now suppose that $(M, \rho)$ is homeomorphic to a subset $S$ of the Hilbert cube.
    $S$ is totally bounded as a subset of a totally bounded metric space, and hence by Exercise 7.10 is also separable.
    Let then $T = \{(x_n)_1, (x_n)_2, \ldots\}$ be a countable dense subset of $S$, and suppose that $f$ is a homeomorphism between $M$ and $S$.
    Find the unique $a_1, a_2, \ldots \in M$ such that $f(a_i) = (x_n)_i$.
    The set $T_M = \{a_1, a_2, \ldots\} \subset M$ is of course countable.
    Furthermore, let $b \in M$, and obtain $(y_n) = f(b) \in S$.
    By the denseness of $T$ in $S$, there exists a sequence $(x_n)_k$ such that $(x_n)_k \rightarrow^{d} (y_n)$, where $d$ is the metric of $H^{\infty}$.
    By the properties of homeomorphisms, this also means that the corresponding sequence $a_k \rightarrow^{\rho} b$.
    This shows that $T_M$ is dense in $M$, and thus that $M$ is separable.
\end{solution}

\begin{exercise}{20}
    Let $E$ be a noncompact subset of $\mathbb{R}$.
    Find a continuous function $f: E \rightarrow \mathbb{R}$ that is (i) not bounded; (ii) bounded but has no maximum value.
\end{exercise}

\begin{solution}
    
    By the Heine-Borel theorem, any closed and bounded subset of $\mathbb{R}$ is compact.
    Therefore, any noncompact set $E \subset \mathbb{R}$ must be either not closed or unbounded.
    We have that:
    \begin{itemize}
        \item If $E$ is unbounded, then let $(x_n) \subset E$ be a sequence formed by selecting $x_i$ such that $\lvert x_i \rvert > i$.
        In fact, WLOG, suppose $x_i > i$, since the case for a subset not bounded below is symmetric.
        Then the function $f: E \rightarrow \mathbb{R}, f(x) = x$ is continuous but clearly unbounded, as evidenced by examining $(f(x_n))$.
        Again on $E$, the function $f(x) = 1 - \frac{1}{1 + x^2}$ is continuous, bounded by 0 and 1, but achieves no maximum value, since $(f(x_n))$ approaches 1 arbitrarily.
        \item If $E$ is bounded but not closed (the only case not covered above), then it must contain at least one convergent sequence $(x_n)$ that converges to a point $y \notin E$.
        Then let $f: E \rightarrow \mathbb{R}$ be such that $f(x) = \frac{1}{x - y}$, which is well defined since $y \notin E$.
        This is continuous, but unbounded on $(x_n)$.
        For our other counterexample, suppose, WLOG, that $y \geq 0$, since the other case will be symmetric.
        Then the function $f: E \rightarrow \mathbb{R}, f(x) = x, x < y, f(x) = - x + 2y, x > y$ is bounded (because $E$ is bounded), but achieves no maximum value: indeed, as $x_n \rightarrow y$, the function's value approaches arbitrarily close to $y$, and for any $x \in E$ it is the case that $f(x) < y$.
        
    \end{itemize} 
\end{solution}

\begin{exercise}{21}
    Prove Corollary 8.6: If $f: [a, b] \rightarrow \mathbb{R}$ is continuous, then the range of $f$ is a compact interval $[c, d]$ for some $c, d \in \mathbb{R}$.
\end{exercise}

\begin{solution}
    
    The statement is obvious in the degenerate case $a = b$, which implies that $f([a, b]) = [f(a), f(a)]$.
    It is also obvious for the case where $[a, b]$ is a non-degenerate interval but $f$ is constant.
    If neither of these hold, we first apply Corollary 6.7 to obtain that $f([a, b])$ is an interval.
    We also apply Corollary 8.5 to obtain that $f$ is bounded on $[a, b]$ and attains its maximum and minimum values, $M, m$ respectively.
    The only way that these can both hold is if $f([a, b]) = [m, M]$: if it was an open or half-open interval, then $f$ would not achieve at least one of $m, M$.
\end{solution}

\begin{exercise}{22}
    If $M$ is compact and $f: M \rightarrow N$ is continuous, prove that $f$ is a closed map.
\end{exercise}

\begin{solution}
    
    We need to show that $f$ maps closed sets to closed sets.
    Suppose then that $A \subset M$ is closed.
    Because $M$ is compact, by Corollary 8.3 we have that $A$ is compact.
    Because $f$ is continuous, by Theorem 8.4 we have that $f(A)$ is compact in $N$, and Corollary 8.3 then implies that $f(A)$ is closed in $N$.
\end{solution}

\begin{exercise}{23}
    Suppose that $M$ is compact and that $f: M \rightarrow N$ is continuous, one-to-one, and onto.
    Prove that $f$ is a homeomorphism.
\end{exercise}

\begin{solution}
    
    Suppose $d, \rho$ are the metrics on $M, N$ respectively.
    Pick any $(x_n) \subset M$ such that $x_n \rightarrow^{d} x \in M$.
    By the continuity of $f$, we have that $f(x_n) \rightarrow^{\rho} f(x)$.
    Now suppose that $y_n \rightarrow^{\rho} y, (y_n) \subset N, y \in N$.
    Since $f$ is one-to-one and onto, there exists a unique sequence $(x_n) \subset M$ and a unique $x \in M$ such that $y_n = f(x_n), y = f(x)$.
    To show that $f$ is a homeomorphism, it suffices to show that $x_n \rightarrow^{d} x$.
    Suppose then that this is not the case, which means that there exists $\epsilon > 0$ such that for every $N > 0$ there exists $n \geq N$ such that $d(x_n, x) \geq \epsilon$.
    Then, form a subsequence $x_{n_k}$ by selecting as the $k$-term the first of the above $x_n$ for which $n \geq k$, and which has not yet been selected.
    Notice that this is always possible, since the condition ``for every $N > 0$'' implies that there exist an infinite number of $x_n$ that satisfy the inequality.
    In this way we have formed a subsequence $x_{n_k}$ of the original $(x_n)$ for which $d(x_{n_k}, x) \geq \epsilon$ for all $k$.
    Because $M$ is compact, we can apply Theorem 8.2 to obtain a subsequence $(x_{n_{k_l}})$ (that is, a sub-subsequence of the original $(x_n)$) that converges to some $x'$.
    Because $f$ is continuous, we then obtain that $(f(x_{n_{k_l}}))$ converges to $f(x')$.
    But $(f(x_{n_{k_l}}))$ is a subsequence of $(y_n)$, and thus it must converge to the same limit, $y$, which means $f(x) = y = f(x')$.
    Consequently, $x' = x$ since $f$ is one-to-one, and so $x_{n_{k_l}} \rightarrow x$.
    This contradicts the definition of $(x_{n_{k_l}})$, and so it must indeed be that $x_n \rightarrow^{d} x$, which means $f$ is a homeomorphism.
\end{solution}

\newpage

\begin{exercise}{24}
    Let $f: [0, 1] \rightarrow [0, 1] \times [0, 1]$ be continuous and one-to-one.
    Show that $f$ cannot be onto.
    Moreoever, show that the range of $f$ is \textit{nowhere dense} in $[0, 1] \times [0, 1]$.
    [Hint: The range of $f$ is closed (why?); if it has nonempty interior, then it contains a closed rectangle.
    Argue that this rectangle is the image of some subinterval of $[0, 1]$.]
\end{exercise}

\begin{solution}
    
    We note first that if we can prove that the range of $f$ is nowhere dense in $[0, 1] \times [0, 1]$ (that is, that it cannot have a non-empty interior), we will have also shown that $f$ cannot be onto.
    Indeed, if it were, its range would equal the entire unit square, whose interior equals itself.
    Suppose then, as stated in the hint, that $f$'s range has a non-empty interior $I$.
    Note that $f$ is continuous and defined on the compact metric space $[0, 1]$, so by Exercise 8.22 it is a closed map.
    Furthermore, $f$ is a homeomorphism \textit{into} the unit square (Exercise 8.23).
    Therefore its range is also closed, since $[0, 1]$ is closed.
    Because $I$ is an open set, it contains a point $x$ such that there exists $\epsilon > 0$ for which $B_{\epsilon}(x) \subset I$.

    Then, by taking a sufficiently small $\epsilon'$, we can always find a closed square of side $\epsilon'$ that is a proper subset of $B_{\epsilon}(x)$.
    Notice that this holds even if $x$ lies on the ``boundary'' of the unit square, because a disk of radius $\epsilon$ around it always has a non-empty intersection with the ``open'' square $(0, 1) \times (0, 1)$ (this means that the square does not degenerate to a segment).
    Call this closed square $S$, and since it is closed and $f$ is a homeomorphism, $f^{-1}(S)$ must be closed as well (Theorem 5.5).
    Not only that, but $S$ is also connected, and so $f^{-1}(S)$ is connected (Theorem 6.6 applied on $f^{-1}$).
    The only possibility is thus that $S$ is the image of a closed subinterval of $[0, 1]$.

    Call this subinterval $[a, b]$, and notice that $[0, 1] \setminus [a, b]$ must be of one of the forms $[0, a), [0, a) \cup (b, 1], (b, 1]$.
    In any one of these cases, we examine the behavior of $f$ on the closure of these intervals, $[0, a], [0, a] \cup [b, 1]$ and $[b, 1]$ respectively, and we call this closure $C$ (regardless of the specific case).
    These are all closed subsets of a compact space, and so are compact themselves (Corollary 8.3), while furthermore their images under $f$ are also compact (Theorem 8.4).
    We argue that this is a contradiction.
    Indeed, it must hold that $B_{\epsilon}(x) \setminus S \subset f(C)$, and because $f$ is one-to-one, \textit{at most two} points of $S, f(a)$ and/or $f(b)$ belong in $f(C)$.
    However, there are infinitely many Cauchy sequences that can be defined inside $B_{\epsilon}(x)$ that converge to points on the boundary of $S$ which do not belong in $f(C)$, which means that $f(C)$ is not complete, which is a contradiction.

    Therefore, the range of $f$ must be nowhere dense in $[0, 1] \times [0, 1]$, and as discussed above, this means that $f$ can also never be onto.

\end{solution}

\begin{exercise}{25}
    Let $V$ be a normed vector space and let $x \neq y \in V$.
    Show that the map $f(t) = x + t(y - x)$ is a homeomorphism from $[0, 1]$ into $V$.
    The range of $f$ is the line segment joining $x$ and $y$; it is often written $[x, y]$.
\end{exercise}

\begin{solution}
    
    In Exercise 6.27, we showed that $f$ is continuous and one-to-one.
    It is furthermore \textit{onto}, as long as we think of it as a function from $[0, 1]$ to $f([0, 1]) \subset V$.
    Furthermore, $[0, 1]$ is compact (Heine-Borel), and so we can apply Exercise 8.23 to conclude that $f$ is a homeomorphism \textit{into} $V$.
\end{solution}

\begin{exercise}{29}
    Let $M$ be a compact metric space and suppose that $f: M \rightarrow M$ satisfies $d(f(x), f(y)) < d(x, y)$ whenever $x \neq y$.
    Show that $f$ has a fixed point.
    [Hint: First note that $f$ is continuous; next, consider $g(x) = d(x, f(x))$.]
\end{exercise}

\begin{solution}
    
    As indicated in the hint, we first show that $f$ is continuous by observing that it is in fact Lipschitz continuous with constant $K = 1$.
    Now consider the function $g(x) = d(x, f(x))$.
    This is easily seen to be continuous as well: if $x_n \rightarrow x$, then $f(x_n) \rightarrow f(x)$, and hence $d(x_n, f(x_n)) \rightarrow d(x, f(x))$ (a simple application of the triangle inequality shows this).
    By Corollary 8.5, $g$ is bounded and attains its minimum value $m$, which means that for some $x_0 \in M, d(x_0, f(x_0)) = m$.
    We claim that $f(x_0)$ is a fixed point for $f$.
    Indeed, if it is not it must be that $f(x_0) \neq f(f(x_0))$ and then it also holds that:

    \[d(f(x_0), f(f(x_0))) < d(x_0, f(x_0)) = m,\]

    which is impossible by the definition of $m$.

\end{solution}

\begin{exercise}{30}
    Prove Lemma 8.8: In a metric space $M$, the following are equivalent:

    (a) If $\mathcal{G}$ is any collection of open sets in $M$ with $\cup\{G: G \in \mathcal{G}\} \supset M$, then there are finitely many sets $G_1, \ldots, G_n \in \mathcal{G}$ with $\cup_{i=1}^{n} G_i \supset M$.

    (b) If $\mathcal{F}$ is any collection of closed sets in $M$ such that $\cap_{i=1}^{n} F_i \neq \emptyset$ for all choices of finitely many sets $F_1, \ldots, F_n \in \mathcal{F}$, then $\cap \{F: F \in \mathcal{F}\} \neq \emptyset$.
\end{exercise}

\begin{solution}
    
    (a) $\implies$ (b): Let $\mathcal{F}$ be any collection of closed sets with the property that any choice of finitely many $F_1, \ldots, F_n \in \mathcal{F}$ have a nonempty intersection.
    Form the collection $\mathcal{G} = \{\overline{F}: F \in \mathcal{F}\}$, i.e., gather all complements of the sets in $\mathcal{F}$.
    Each of these is by definition open.
    The statement we would like to prove can be rewritten via DeMorgan's laws as:

    \[\cap \{F: F \in \mathcal{F} \} \neq \emptyset \iff \overline{\cup\{\overline{F}: F \in \mathcal{F}\}} \neq \emptyset \iff \cup \{G: G \in \mathcal{G} \} \neq M\]

    Suppose that this does not hold, i.e., that $\cup\{G: G \in \mathcal{G}\} = M$.
    Then by our hypothesis (a), there exist finitely many $G_1, \ldots, G_n$ such that:

    \[\bigcup_{i=1}^{n} G_i = M \implies \bigcup_{i=1}^{n} \overline{F_i} = M \implies \overline{\bigcap_{i=1}^{n} F_i} = M \implies \bigcap_{i=1}^{n} F_i = \emptyset\]

    But this directly contradicts the defining property of $\mathcal{F}$, since any choice of finitely many $F_i \in \mathcal{F}$ must have a nonempty intersection.
    We've therefore shown that $\cap\{F: F \in \mathcal{F}\} \neq \emptyset$, i.e., that the implication stated by (b) holds.

    (b) $\implies$ (a): Suppose $\mathcal{G}$ is a collection of open sets with $\cup\{G: G \in \mathcal{G}\} \supset M$, and suppose that \textit{no choice} of finitely many $G_1, \ldots, G_n \in \mathcal{G}$ is such that $\cup_{i=1}^{n} G_i \supset M$.
    Form the collection of the complements $\mathcal{F} = \{\overline{G}: G \in \mathcal{G}\}$, and notice that each of these sets is closed.
    For any finitely many $G_1, \ldots, G_n \in \mathcal{G}$, it must hold that:

    \[\cup_{i=1}^{n} \{G: G \in \mathcal{G}\} \neq M \iff \overline{\cap_{i=1}^{n} \{\overline{G}: G \in \mathcal{G}\}} \neq M \iff \cap_{i=1}^{n} \{F: F \in \mathcal{F}\} \neq \emptyset\]

    We have shown that the hypothesis of (b) holds for $\mathcal{F}$, therefore the conclusion holds as well.
    This means that:

    \[\cap\{F: F \in \mathcal{F}\} \neq \emptyset \implies \overline{\cup\{\overline{F}: F \in \mathcal{F}\}} \neq \emptyset \implies \cup\{G: G \in \mathcal{G}\} \neq M\]

    But this directly contradicts the defining property of $\mathcal{G}$, and so it must be the case that there exists a choice of finitely many $G_1, \ldots, G_n \in \mathcal{G}$ such that $\cup_{i=1}^{n} G_i \supset M$, and the implication stated by (a) holds.
\end{solution}

\begin{exercise}{31}
    Given an arbitrary metric space $M$, show that a decreasing sequence of nonempty compact sets in $M$ has nonempty intersection.
\end{exercise}

\begin{solution}
    
    Consider such a sequence of sets $S_1 \supset S_2 \supset \ldots$.
    Think of $S_1$ as a compact metric space.
    Then, inside $S_1$, any number of finitely many sets from $S_2, S_3, \ldots$ have nonempty intersections: indeed, the intersection equals the smallest of these finitely many sets (i.e., the one with the largest subscript).
    Because $S_1$ is compact, we can apply Theorem 8.9 to conclude that statement (b) from Lemma 8.8 holds, and so that $\cap_{i \geq 2} S_i \neq \emptyset$.
    Obviously, since $S_2 \subset S_1$ the elements of this intersection belong in $S_1$ as well, and so we conclude that the entire decreasing sequence of sets has nonempty intersection.
\end{solution}

\newpage

\begin{exercise}{32}
    Prove Corollary 8.11 ($M$ is compact iff every countable open cover admits a finite subcover), by showing that the following two statements are equivalent:

    (i) Every decreasing sequence of nonempty closed sets in $M$ has nonempty intersection.

    (ii) Every countable open cover of $M$ admits a finite subcover; that is, if $(G_n)$ is a sequence of open sets in $M$ satisfying $\cup_{n=1}^{\infty} G_n \supset M$, then $\cup_{n=1}^{N} G_n \supset M$ for some (finite) $N$.
\end{exercise}

\begin{solution}
    
    Suppose first that every decreasing sequence of nonempty closed sets in $M$ has nonempty intersection, and suppose that $G_1, G_2, \ldots$ is a countable open cover of $M$.
    Form the sequence of sets:

    \[\overline{G_1}, \overline{G_1} \cap \overline{G_2}, \overline{G_1} \cap \overline{G_2} \cap \overline{G_3}, \ldots\]

    Each of these sets is closed as a finite intersection of closed sets (complements of open sets).
    Furthermore, suppose that any of them is empty:

    \[G_1 \cap G_2 \cap \ldots \cap G_n = \emptyset \implies \overline{G_1 \cup \ldots \cup G_n} = \emptyset \implies \cup_{i=1}^{n} G_i = M\]

    This means that the countable open cover admits a finite subcover.
    If \textit{none} of them are empty, then observe that they form a decreasing subsequence, and so we can use the hypothesis to obtain that the infinite sequence has nonempty intersection:

    \[\cap_{i=1}^{\infty} \overline{G_i} \neq \emptyset \implies \overline{\cup_{i=1}^{\infty} G_i} \neq \emptyset \implies \cup_{i=1}^{\infty}G_i \neq M,\]

    which contradicts the fact that $G_i$ form a cover of $M$.
    Therefore, it is eventually the case that $G_1 \cap \ldots \cap G_i$ becomes empty, and so the countable open cover must admit a finite subcover.

    Now suppose that every countable open cover admits a finite subcover, and pick a decreasing sequence $F_1 \supset F_2 \supset \ldots$ of closed, nonempty sets in $M$.
    Form the sequence of sets:

    \[\overline{F_1}, \overline{F_2}, \overline{F_3}, \ldots\]

    All of these sets are open as complements of closed sets.
    Suppose now that the infinite union of $\overline{F_i}$ does not cover the metric space.
    Then there exists $x \notin \overline{F_i}$ for all $i$, which means $x \in \cap_{i=1}^{\infty} F_i$, and so the infinite intersection of all $F_i$ is nonempty.
    If it does cover the metric space, then as a countable open cover it admits, by our hypothesis, a finite subcover $\overline{F_1} \cup \ldots \cup \overline{F_n} = M$.
    This means that $\overline{F_1 \cap \ldots \cap F_n} = M$, and consequently that $F_1 \cap \ldots \cap F_n = \emptyset$.
    Because these sets are nested, the only way that this is possible is if $F_j = \emptyset$ for all $j$ after some $i \leq n$, which contradicts our hypothesis.
    Therefore, the decreasing sequence $F_1 \supset F_2 \supset \ldots$ has nonempty intersection.
    Having shown this equivalence, we recall from Corollary 8.10 that $M$ is compact iff (i) holds, and so indeed $M$ is compact iff (ii) holds (Corollary 8.11).
\end{solution}

\begin{exercise}{36}
    Let $F$ and $K$ be disjoint, nonempty subsets of a metric space $M$ with $F$ closed and $K$ compact.
    Show that $d(F, K) = \inf\{d(x, y): x \in F, y \in K\} > 0$.
    Show that this many fail if we assume only that $F$ and $K$ are disjoint closed sets.
\end{exercise}

\begin{solution}
    
    Notice first that this quantity is indeed a real number, since $K$ is compact, which means that it is bounded.
    Suppose then that it is not the case that $d(F, K) > 0$, which means $d(F, K) = 0$.
    This means that for any $\epsilon > 0$, there exist $x \in F, y \in K$ such that $d(x, y) < \epsilon$.
    For the sequence of epsilons $\epsilon_i = \frac{1}{i}$, select $x_i, y_i$ such that $d(x_i, y_i) < \epsilon_i$.
    Because the sequence $(y_n)$ is in the compact set $K$, it contains a convergent subsequence $(y_{n_k})$, which converges to $y \in K$ (Theorem 8.2).
    Form the corresponding subsequence $(x_{n_k})$.
    For any given $\epsilon > 0$, find $N$ such that for $k \geq N, d(y_{n_k}, y) < \epsilon/2$.
    Find also $M > 0$ such that for $k \geq M, d(x_{n_k}, y_{n_k}) < \epsilon/2$, which is always possible from the definition of $(x_n), (y_n)$.
    Notice that for any $k \geq \max\{N, M\}, d(x_{n_k}, y) \leq d(x_{n_k}, y_{n_k}) + d(y_{n_k}, y) < \epsilon/2 + \epsilon/2 = \epsilon$.
    This means that $(x_{n_k}) \subset F$ converges to $y \notin F$, which contradicts the fact that $F$ is closed.
    Therefore $d(F, K) > 0$.
    To show that it does not suffice for $K$ to be closed only, consider $M = \mathbb{R}^2, F = \{(x, 0): x \in \mathbb{R}\}, K = \{(x, \frac{1}{x}): x > 0\}$.
    It's easy enough to see that these are both closed by examining their complements, and they are also clearly disjoint.
    However, notice that for any $\epsilon > 0, d((\frac{2}{\epsilon}, 0), (\frac{2}{\epsilon}, \frac{1}{2/\epsilon})) = \epsilon/2$, which means that $d(F, K)$ must be zero.
\end{solution}

\begin{exercise}{40}
    Let $M$ be compact and let $f: M \rightarrow M$ satisfy $d(f(x), f(y)) = d(x, y)$ for all $x, y \in M$.
    Show that $f$ is onto.
    [Hint: If $B_{\epsilon}(x) \cap f(M) = \emptyset$, consider the sequence $(f^{(n)}(x))$.]
\end{exercise}

\begin{solution}
    
    Notice that $f$ is an isometry, and thus continuous.
    Therefore, the set $f(M)$ must be compact in $M$ (Theorem 8.4).
    Suppose then that it is the case that there exists $x \notin f(M)$, i.e., that $f$ is not onto.
    We claim that there exists $\epsilon > 0$ such that the entire open ball $B_{\epsilon}(x)$ lies outside $f(M)$.
    If this was not the case, then by taking successive $x_n$ such that $d(x_n, x) < \frac{1}{n}$, we could easily construct a Cauchy sequence $(x_n) \subset f(M)$ that converges to $x \notin f(M)$, which would be a contradiction because $f(M)$ is complete.
    Now consider what happens if, as indicated in the hint, we examine the sequence $(f^{(n)}(x))$.
    Since this belongs entirely in the compact set $f(M)$, it must contain a convergent subsequence (Theorem 8.2) $(f^{(n_k)}(x))$, converging to some $y \in f(M)$.
    Because this subsequence converges, it must be Cauchy.
    Therefore, there exists some $N$ such that for $k, l \geq N$ (WLOG, $k < l$) it holds that:

    \[d(f^{(n_k)}(x), f^{(n_l)}(x)) < \epsilon \implies d(x, f^{(n_l - n_k)}(x)) < \epsilon\]

    What this implies, of course, is that $f^{(n_k - n_l)}(x)$ lies inside the ball $B_{\epsilon}(x)$, which as we saw above is impossible.
    Therefore, it cannot be the case that $x \notin f(M)$ for some $x$, and so $f$ is onto.
\end{solution}

\begin{exercise}{41}
    Is compactness necessary in Exercise 40?
    That is, is it possible for a metric space to be isometric to a proper subset of itself?
    Explain.
\end{exercise}

\begin{solution}
    
    Consider the clearly non-compact metric space $M = [1, +\infty)$, and the function $f: M \rightarrow M, f(x) = x + 1$.
    The range of $f$ is $f(M) = [2, +\infty)$, which is a proper subset of $M$.
    We can easily see that $f$ is an isometry, and so $[1, +\infty)$ is isometric to $[2, +\infty)$.
\end{solution}

\begin{exercise}{42}
    Let $M$ be compact and let $f: M \rightarrow M$ satisfy $d(f(x), f(y)) \geq d(x, y)$ for all $x, y \in M$.
    Prove that $f$ is an isometry of $M$ onto itself.
\end{exercise}

\begin{solution}
    
    Notice that if we can prove that the given inequality is in fact always an equality, then we can apply Exercise 8.40 to directly obtain that $f$ is an onto isometry.
    Suppose, therefore, that there exist $x, y \in m$ such that $d(x, y) < d(f(x), f(y))$.
    Form the sequences $f^{(n)}(x), f^{(n)}(y)$, and notice that for $n \geq 1$, it holds that $d(f^{(n)}(x), f^{(n)}(y)) \geq d(f(x), f(y))$, due to the given property of $f$.
    Now, $M$ is compact, and hence by Theorem 8.2, there exists a subsequence $(f^{(n_k)}(x))$ that converges to a point in $M$.
    If we then take these indices $n_k$ and form the subsequence $(f^{(n_k)}(y))$, we can again apply Theorem 8.2 to obtain a further subsequence $(f^{(n_{k_l})}(y))$ that converges to a point in $M$.
    Because any subsequence of a convergent sequence also converges, we can safely work with both $(f^{n_{k_l}}(x)), (f^{(n_{k_l})}(y))$ as convergent subsequences.
    Since these are convergent, they are also Cauchy.
    This means that for any given $\epsilon > 0$, there exists $N_1 > 0$ such that for $l_1, l_2 \geq N_1$ (WLOG, $l_1 < l_2$), it holds that:

    \[d(f^{(n_{k_{l_1}})}(x), f^{{(n_{k_{l_2}})}}(x)) < \epsilon \implies d(x, f^{(n_{k_{l_2}} - n_{k_{l_1}})}(x)) < \epsilon,\]

    where we have again (repeatedly) used the defining property of $f$.
    Notice that what this says is that a subsequence of $f^{(n_{k_l})}(x)$ converges to $x$, which means that this must hold for the sequence $f^{(n_k)}(x) $itself (since it's a convergent one).
    The exact same argument can be applied to show that $f^{(n_{k})}(y)$ converges to $y$.
    Now, for $\epsilon = \frac{d(f(x), f(y)) - d(x, y)}{2}$, obtain $N_1 > 0, N_2 > 0$ such that for $l_1 \geq N_1, l_2 \geq N_2$:

    \[d(x, f^{(n_{k_{l_1}})}(x)) < \epsilon, d(y, f^{(n_{k_{l_2}})}(y)) < \epsilon\]

    Consequently, for $l \geq \max\{N_1, N_2\}$:

    \[d(f^{(n_{k_l})}(x), f^{(n_{k_l})}(y)) \leq d(x, f^{(n_{k_l})}(x)) + d(x, f^{(n_{k_l})}(y)) \leq d(x, f^{(n_{k_l})}(x)) + d(x, y) + d(y, f^{(n_{k_l})}(y))\]
    \[\leq 2\epsilon + d(x, y) = d(f(x), f(y)) - d(x, y) + d(x, y) = d(f(x), f(y))\]

    But this directly contradicts our initial observation that for $n \geq 1, d(f^{(n)}(x), f^{(n)}(y)) \geq d(f(x), f(y))$, and therefore it must always be the case that $d(f(x), f(y)) = d(x, y)$, which as discussed above means that $f$ is an isometry onto $M$.

\end{solution}

\begin{exercise}{43}
    Let $M$ be compact and suppose that $f: M \rightarrow M$ is one-to-one, onto, and satisfies $d(f(x), f(y)) \leq d(x, y)$ for all $x, y \in M$.
    Prove that $f$ is an isometry of $M$ onto itself.
    [Hint: Exercise 42.]
\end{exercise}

\begin{solution}
    
    Since $f$ is both one-to-one and onto, it is invertible.
    Then, for any two $x, y \in M$:

    \[d(f(x), f(y)) \leq d(x, y) \implies d(x, y) \leq d(f^{-1}(x), f^{-1}(y))\]

    We can therefore directly apply Exercise 8.42 to conclude that $f^{-1}$ is an isometry of $M$ onto itself.
    It's easy to see that this implies that $f$ is then also an isometry of $M$ onto itself.
\end{solution}

\section{Uniform Continuity}

\begin{exercise}{44}
    Show that any Lipschitz map $f: (M, d) \rightarrow (N, \rho)$ is uniformly continuous.
    In particular, any isometry is uniformly continuous.
\end{exercise}

\begin{solution}
    
    If $f: (M, d) \rightarrow (N, \rho)$ is Lipschitz continuous, there exists $K \geq 0$ such that $\rho(f(x), f(y)) \leq K d(x, y)$ for any two $x, y \in M$.
    if $K = 0$, then $f$ is trivially uniformly continuous, since $f(x) = f(y)$ for any two $x, y \in M$.
    If $K > 0$, then for any $\epsilon > 0$, let $\delta = \frac{\epsilon}{K}$.
    Then, whenever $d(x, y) < \delta$, we have:

    \[\rho(f(x), f(y)) \leq K d(x, y) < K \frac{\epsilon}{K} = \epsilon\]

    The selection of $\delta$ is independent of $x, y$, and therefore $f$ is indeed uniformly continuous.
    Now, an isometry is Lipschitz continuous with $K = 1$, and therefore it follows immediately that it is also uniformly continuous.
\end{solution}

\begin{exercise}{45}
    Prove that \textit{every} map $f: \mathbb{N} \rightarrow \mathbb{R}$ is uniformly continuous.
\end{exercise}

\begin{solution}
    
    Take any $\epsilon$ and take $\delta = 1/2$.
    Then for any two $x, y \in \mathbb{N}$ such that $\lvert m - n \rvert < \delta$, it vacuously holds that $\lvert f(m) - f(n) \rvert < \epsilon$, since no two natural numbers satisfy $\lvert m - n \rvert < 1/2$ except if $m = n$ (in which case clearly $\lvert f(m) - f(n) \rvert = 0$).
\end{solution}

\newpage

\begin{exercise}{46}
    Show that $\lvert d(x, z) - d(y, z) \rvert \leq d(x, y)$ and conclude that the map $x \mapsto d(x, z)$ is uniformly continuous on $M$ for each fixed $z \in M$.
\end{exercise}

\begin{solution}
    
    For the inequality, we already know it to hold from Exercise 3.2.
    Now, consider any $\epsilon > 0$ and set $\delta = \epsilon$.
    Then, based on the ``reverse triangle inequality'', whenever $d(x, y) < \delta$, we have that:

    \[\lvert d(x, z) - d(y, z) \rvert \leq d(x, y) < \delta = \epsilon,\]

    which shows that the map $x \mapsto d(x, z)$ is uniformly continuous for any fixed $z \in M$.
\end{solution}

\begin{exercise}{47}
    Given a nonempty subset $A \subset M$, show that $\lvert d(x, A) - d(y, A) \rvert \leq d(x, y)$, and conclude that the map $x \mapsto d(x, A)$ is uniformly continuous on $M$.
\end{exercise}

\begin{solution}
    
    We know that this inequality holds from Proposition 5.4.
    Then, for any $\epsilon > 0$, set $\delta = \epsilon$ and observe that whenever $d(x, y) < \delta$, we have that:

    \[\lvert d(x, A) - d(y, A) \rvert \leq d(x, y) < \delta = \epsilon,\]

    and so the map from $x$ to $d(x, A)$ is uniformly continuous on $M$ for any fixed $A$.
\end{solution}

\begin{exercise}{48}
    Prove that a uniformly continuous map sends Cauchy sequences into Cauchy sequences.
\end{exercise}

\begin{solution}
    
    Let $f: (M, d) \rightarrow (N, \rho)$ be uniformly continuous, and $(x_n) \subset M$ be Cauchy.
    Pick any $\epsilon > 0$, and obtain $\delta > 0$ for which it holds that $d(x, y) < \delta \implies \rho(f(x), f(y)) < \epsilon$ for any two $x, y \in M$, which exists because $f$ is uniformly continuous.
    Furthermore, pick $N > 0$ such that $d(x_n, x_m) < \delta$ for any $n, m \geq N$, which exists because $(x_n)$ is Cauchy.
    Then, for any $n, m \geq N$ it must hold that $d(x_n, x_m) < \delta$, and thus also that $\rho(f(x_n), f(x_m)) < \epsilon$, which shows precisely that $(f(x_n))$ is Cauchy in $N$.
\end{solution}