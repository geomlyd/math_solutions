\chapter{Compactness}

\section{Compact Metric Spaces}

\begin{exercise}{1}
    If $K$ is a nonempty compact subset of $\mathbb{R}$, show that $\sup K, \inf K$ are elements of $K$.
\end{exercise}

\begin{solution}
    
    First, observe that $\sup K$ is a well-defined real number since $K$ is (totally) bounded.
    Second, recall the $\epsilon$-based characterization of the supremum: for every $\epsilon > 0$, there exists $x \in K$ such that $x > \sup K - \epsilon$.    
    Form then a sequence $(x_n) \subset K$ such that $x_n > \sup K - \frac{1}{n}$, and notice that this converges to the supremum.
    Because $K$ is also closed, it must be that $\sup K \in K$ as a limit point.
    The proof for the infimum is exactly symmetrical.
\end{solution}

\begin{exercise}{2}
    Let $E = \{x \in \mathbb{Q} : 2 < x^2 < 3 \}$, considered as a subset of $\mathbb{Q}$ (with its usual metric).
    Show that $E$ is closed and bounded but \textit{not} compact.
\end{exercise}

\begin{solution}
    
    First, we notice that any element $x \in E$ must be such that $\sqrt{2} < \lvert x \rvert < \sqrt{3}$.
    This means that for any two $x, y \in E$:

    \[\sqrt{2} < \lvert x \rvert < \sqrt{3}, \sqrt{2} < \lvert y \rvert < \sqrt{3} \implies -\sqrt{2} < x < \sqrt{3}, -\sqrt{3} < -y < \sqrt{2} \implies \]
    \[ -(\sqrt{3} + \sqrt{2}) < x - y < \sqrt{3} + \sqrt{2} \implies \lvert x - y \rvert < \sqrt{3} + \sqrt{2}\]

    This shows that $E$ is indeed bounded (has bounded diameter).
    To show that it is closed, suppose $(x_n) \subset E$ converges to some $x \in \mathbb{Q}$.
    Suppose that it was the case that $x^2 > 3$.
    By the continuity of the squaring function, we have that $x_n^2 \rightarrow x^2$, and this then means that the terms $x_n^2$ get infinitely close to $3 + \epsilon$, and thus more specifically eventually become larger than 3, a contradiction.
    Similarly, it cannot be that $x^2 < 2$.
    The only possibilities that remain for $x \notin E$ are $x^2 = 2$ or $x^2 = 3$.
    Suppose $x^2 = 2$.
    This would mean that $x_n^2 \rightarrow x^2$, and by the continuity of the square root function we would have that $x_n \rightarrow \sqrt{2}$.
    However, $\sqrt{2}$ is \textit{not} a rational, which is a contradiction since we began with the assumption that $x_n$ converges to some limit in the metric space.
    The same holds for $x^2 = 3$.
    Therefore $x \in E$ always, and thus $E$ is closed.
    However, consider the sequence constructed as follows.
    Start with $x_1 = 3/2 \in E$. 
    Between any two real numbers we can always find a rational number, and so pick $x_2$ to be between $\sqrt{2}, (\sqrt{2} + x_1)/2$.
    Continue this way to form a sequence that is Cauchy: the distance between subsequent terms is iteratively divided by two.
    Nevertheless, as observed above this sequence does \textit{not} converge in $\mathbb{Q}$.
    In fact all its subsequences converge to $\sqrt{2}$, so none of them can converge in $\mathbb{Q}$, and thus more specifically in $E$, and thus by theorem 8.2, $E$ is not compact.
\end{solution}

\newpage

\begin{exercise}{3}
    If $A$ is compact in $M$, prove that $\text{diam}(A)$ is finite.
    Moreover, if $A$ is nonempty, show that there exist points $x, y \in A$ such that $\text{diam}(A) = d(x, y)$.
\end{exercise}

\begin{solution}
    
    Because $A$ is compact, it must be totally bounded, and hence also bounded.
    We've seen this (totally bounded $\implies$ bounded) in Example 7.2 (a) and provided a proof in Ex. 2 of Ch. 7.
    Therefore, $A$ has finite diameter.
    Now suppose $A$ is nonempty.
    We know that $\text{diam}(A) = \sup\{d(x, y), x, y \in A\}$ is finite.
    By the definition of the supremum, for every $\epsilon > 0$, there exist $x, y \in A$ such that $d(x, y) > \text{diam}(A) - \epsilon$.
    For successive $\epsilon_i = \frac{1}{i}$, find $x_i, y_i$ such that $d(x_i, y_i) > \text{diam}(A) - \epsilon_i$.
    Form two sequences, $(x_i), (y_i) \subset A$.
    Because $A$ is compact, by Theorem 8.2, the sequence $(x_i)$ contains a convergent subsequence $x_{i_k} \rightarrow x \in A$.
    Select the corresponding subsequence $(y_{i_k})$ that satisfies the above inequality when paired with $(x_{i_k})$.
    Notice that again by Theorem 8.2, we can select a sub-subsequence $(y_{{i_k}_{l}})$ such that $y_{{i_k}_l} \rightarrow y \in A$.
    Of course, a subsequence of a convergent subsequence converges, so take also the corresponding $(x_{{i_k}_l})$, which converges to $x$.
    By our initial inequality above we have $d(x_{{i_k}_l}, y_{{i_k}_l}) \rightarrow \text{diam}(A)$, .
    By Exercise 34, Ch. 3, we know that $d(x_{{i_k}_l}, y_{{i_k}_l}) \rightarrow d(x, y)$, and thus by the uniqueness of the limit we conclude that $d(x, y) = \text{diam}(A)$.
\end{solution}

\begin{exercise}{4}
    If $A, B$ are compact sets in $M$, show that $A \cup B$ is compact.
\end{exercise}

\begin{solution}
    
    Let $(c_i) \subset A \cup B$ be a non-trivial sequence (i.e., not eventually constant).
    If $(c_i)$ contains an infinite number of terms $a_i \in A$, then this sequence of $a_i$ has a subsequence that converges to a point in $A$, since $A$ is compact.
    A subsequence of a subsequence is also a subsequence of the sequence itself, and thus $(c_i)$ contains a sequence converging to a point in $A \cup B$.
    If $(c_i)$ contains only a finite number of terms from $A$, then it contains an infinite number of terms from $B$, and we use the same argument to show that it contains a subsequence converging to a point in $B$.
    Therefore, $A \cup B$ is compact, by Theorem 8.2.
\end{solution}

\begin{exercise}{6}
    If $A$ is compact in $M$ and $B$ is compact in $N$, show that $A \times B$ is compact in $M \times N$ (see Exercise 3.46).
\end{exercise}

\begin{solution}
    
    Let $((x_i, y_i)) \subset A \times B$ be a sequence.
    By Theorem 8.2, $(x_i) \subset A$ has a convergent subsequence $(x_{i_k}) \subset A$, such that $x_{i_k} \rightarrow x \in A$, since $A$ is compact in $M$.
    Take the subsequence $(y_{i_k}) \subset B$.
    Again, because $B$ is compact in $N$, there exists $(y_{i_{k_l}}) \subset B$ such that $y_{i_{k_l}} \rightarrow y \in B$.
    Any subsequence of $(x_{i_k})$ converges to $x$, so take the corresponding $x_{i_{k_l}} \rightarrow x$.
    By Exercise 3.46, the sequence $((x_{i_{k_l}}, y_{i_{k_l}})) \subset A \times B$ converges to $(x, y) \in A \times B$.
    Since this is a subsequence of $((x_i, y_i))$, we 've shown that $A \times B$ is compact in $M \times N$.
\end{solution}

\begin{exercise}{10}
    Show that the Heine-Borel theorem (closed, bounded sets in $\mathbb{R}$ are compact) implies the Bolzano-Weierstrass theorem.
    Conclude that the Heine-Borel theorem is equivalent to the completeness of $\mathbb{R}$.
\end{exercise}

\begin{solution}
    
    The Bolzano-Weierstrass theorem states that every bounded infinite subset of $\mathbb{R}$ has a limit point in $\mathbb{R}$.
    Suppose $A$ is such a subset, and consider its closure, $\overline{A}$, which must also be bounded (if not, due to the definition of the closure, there would be points of $A$ infinitely close to points of $\partial A$ that form an unbounded sequence, a contradiction).
    Because $\overline{A}$ is also closed, then by our assumption of the Heine-Borel theorem, it is compact.
    Then Theorem 8.2 guarantees that every sequence in $A \subset \overline{A}$ has a subsequence converging to a point in $\overline{A}$, which means we've shown the Bolzano-Weierstrass theorem.
    Observe, also, that what we've shown implies the completeness of the reals: any Cauchy sequence in $\mathbb{R}$ has a bounded infinite range, and hence has a convergent subsequence, which for a Cauchy sequence means that it itself converges.

    For a stronger version of this exercise, we work with the hypothesis that any closed \textit{interval} $[a, b]$ is compact.
    For a bounded, infinite subset of $\mathbb{R}$ we know that it has \textit{a} lower bound $m$, and \textit{an} upper bound $M$, which means $A \subset [m, M]$.
    Importantly, we do not assume that least upper bounds or greatest lower bounds exist, since this is the axiom of completeness.
    This interval is compact by our hypothesis.
    Thus, for any sequence in $A \subset [m, M]$, we can use theorem 8.2 to obtain a sequence with a subsequence converging to a point in $[m, M] \subset \mathbb{R}$, thus showing the Bolzano-Weierstrass theorem again.

\end{solution}

\begin{exercise}{11}
    Prove that compactness is not a relative property.
    That is, if $K$ is compact in $M$, show that $K$ is compact in \textit{any} metric space that contains it (isometrically).
\end{exercise}

\begin{solution}
    
    Let $(N, \rho)$ be any metric space such that for a subset $L \subset N$ it holds that $i: K \rightarrow L$ is an isometry onto $L$. 
    We need to show that $L$ is compact in $N$.
    Pick any sequence $(y_i) \subset L$.
    Because $K, L$ are isometric, there exists a unique sequence $(x_i) \subset K$ such that $i(x_i) = y_i$.
    Now, since $K$ is compact in $M$, by Theorem 8.2, $(x_i)$ contains a convergent subsequence $(x_{i_k})$ such that $x_{i_k} \rightarrow^{d} x \in K$.
    Notice now that $i$ is a homeomorphism, and thus $i(x_{i_k}) \rightarrow^{\rho} i(x)$, which means $y_{i_k} \rightarrow^{\rho} i(x)$.
    Because $i$ is onto, $i(x) \in L$.
    We've therefore shown that $(y_i)$ contains a convergent subsequence $y_{i_k} \rightarrow^{\rho} i(x) \in L$, which by Theorem 8.2 means that $L$ is compact in $(N, \rho)$.
\end{solution}

\begin{exercise}{15}
    If $A$ is a totally bounded subset of a complete metric space $M$, show that $\overline{A}$ is compact in $M$.
    For this reason, totally bounded sets are sometimes called \textit{precompact} or \textit{conditionally compact}.
    In fact, any set with compact closure might be labeled precompact.
\end{exercise}

\begin{solution}
    
    By definition, we know that $\overline{A}$ is closed in the complete metric space $M$.
    Therefore, it is complete (Theorem 7.9).
    Furthermore, by Exercise 7.5, we know that $A$ is totally bounded iff $\overline{A}$ is totally bounded, and thus $\overline{A}$ is totally bounded, from which we can conclude that it is compact.
\end{solution}

\begin{exercise}{16}
    Show that a metric space $M$ is totally bounded if and only if its completion $\hat{M}$ is compact.
\end{exercise}

\begin{solution}

    $\implies$: By definition, $\hat{M}$ is complete, as a completion.
    To show that it is totally bounded, we have the following.
    For any $\epsilon > 0$, let $x_1, \ldots, x_n \in M$ be such that $M \subset \bigcup_{i=1}^{n} B_{\epsilon}^{d}(x_i)$, which is always feasible due to $M$ being totally bounded.
    Now, because $i:M \rightarrow \hat{M}$ is an isometry into $\hat{M}$, it is easy to see from the above that $i(M)$ is totally bounded.
    Take then any $\epsilon > 0$ and find $y_1, \ldots, y_n \in i(M)$ such that $i(M) \subset \bigcup_{i=1}^{n} B_{\epsilon/2}^{\hat{d}} (y_i)$.
    Because $i(M)$ is dense in $\hat{M}$, for any $y \in \hat{M}$ there exists $z \in i(M)$ such that $\hat{d}(y, z) < \epsilon/2$.
    But then since $z \in \bigcup_{i=1}^{n} B_{\epsilon/2}^{\hat{d}} (y_i)$, it must be the case that $d(z, y_i) < \epsilon/2$ for at least one $y_i$.
    Consequently:

    \[d(y, y_i) \leq d(y, z) + d(z, y_i) < \epsilon/2 + \epsilon/2 = \epsilon\]

    We conclude then that in fact $\hat{M} \subset \bigcup_{i=1}^{n} B_{\epsilon}^{\hat{d}} (y_i)$, which means that $\hat{M}$ is totally bounded and thus also compact.

    $\impliedby$: Conversely, assume $\hat{M}$ is compact.
    Then it is totally bounded, and thus any subset of it, more specifically $i(M)$, is totally bounded as well.
    By using the same argument as in the forward direction, we can show that $M$ is then also totally bounded.
\end{solution}