
\chapter{Probability and counting}

\section{Counting}

\begin{exercise}{1}
    How many ways are there to permute the letters in the word MISSISSIPPI?
\end{exercise}

\begin{solution}

    The word has 11 letters and the following letter frequencies. 
    M: 1, I: 4, S: 4, P: 2.
    We can find the number of permutations by counting as follows: pick the places for the M's first, then out of the remaining places pick the places for P's, then for S's, and then the places for I's are determined uniquely.
    Then, apply the multiplication rule.
    Note that within each selection of places, the order doesn't matter since we don't distinguish between ``instances'' of the same letter.
    We thus have that the number of permutations is:

    \[\binom{11}{1} \cdot \binom{10}{2} \cdot \binom{8}{4} = 11 \cdot \frac{10!}{8! \cdot 2!} \cdot \frac{8!}{4! \cdot 4!} = 11 \cdot \frac{10!}{4! \cdot 4! \cdot 2!} = 11 \cdot \frac{10\cdot 9 \ldots 5}{4! \cdot 2} = 34,650\]
\end{solution}

\begin{exercise}{4}
    A \textit{round-robin} tournament is being held with $n$ tennis players; this means that every player will play against every other player exactly once.

    (a) How many possible outcomes are there for the tournament (the outcome lists out who won and who lost for each game)?

    (b) How many games are played in total?
\end{exercise}

\begin{solution}
    
    (a) Consider ordering the players in some arbitrary but fixed order.
    Then we can count the number of outcomes as follows.
    For the first player, there are 2 possible outcomes (win/lose) against all other $n - 1$ players.
    This is equivalent to sampling with replacement $n - 1$ times from a set of two elements.
    For the second player in the ordering, the outcome against the first player has already been decided/accounted for, so there are $n - 2$ outcomes against all other players.
    We continue this way and apply the multiplication rule to obtain the total number of outcomes:

    \[\prod_{k=1}^{n}2^{n-k} = 2^{\sum_{k=1}^{n}n - k} = 2^{\sum_{k=1}^{n - 1}k} = 2^{\frac{n(n-1)}{2}}\]

    (b) The first player in the ordering plays in $n - 1$ games.
    The second player plays in $n - 2$ games \textit{more}, since the match against player 1 was already accounted for.
    We continue this way to obtain the total number of games:

    \[\sum_{k=1}^{n} (n - k) = \frac{n(n - 1)}{2}\]

    Notice that this is consistent with the answer from (a): another way of getting the number of possible outcomes is listing the number of different games between two players, and assigning a win/lose outcome to each.
\end{solution}

\begin{exercise}{5}
    A \textit{knock-out tournament}  is being held with $2^n$ tennis players.
    This means that for each round, the winners move on to the next round and the losers are eliminated, until only one person remains.
    For example, if initially there were $2^4 = 16$ players, then there are 8 games on the first round, then the 8 winners move on to round 2, then the 4 winners move on to round 3, then the 2 winners move on to round 4, the winner of which is declared the winner of the tournament. (There are various systems for determining who plays whom within a round, but these do not matter for this problem.)

    (a) How many rounds are there?

    (b) Count how many games in total are played, by adding up the numbers of games played in each round.

    (c) Count how many games in total are played, this time by directly thinking about it without doing almost any calculation.

    Hint: How many players need to be eliminated?
\end{exercise}

\begin{solution}
    
    (a) The number of players per round is halved every time, until two players remain, or, in other words, until the exponent of $2^k$ drops to 1.
    This corresponds of course to $n - 1$ rounds.

    (b) In each round, every winner plays exactly one game against exactly one loser.
    In other words, out of $2^k$ players of the round, $2^{k-1}$ games are formed.
    Since there are $n - 1$ rounds, the total number of games is:

    \[\sum_{k=1}^{n} 2^{k - 1} = \sum_{k=0}^{n-1}2^k = 2^{n} - 1\]

    (c) In order to obtain the final winner, $2^{n} - 1$ players will need to be eliminated (all but one).
    Every game in the tournament has exactly one loser, and each time someone loses they never play again, which means that the number of games equals the number of eliminated players, and so we obtain $2^{n} - 1$ once again.
\end{solution}

\begin{exercise}{10}
    To fulfill the requirements for a certain degree, a student can choose to take any 7 out of a list of 20 courses, with the constraint that at least 1 of the 7 courses must be a statistics course.
    Suppose that 5 out of the 20 courses are statistics courses.

    (a) How many choices are there for which 7 courses to take?

    (b) Explain intuitively why the answer to (a) is not $\binom{5}{1} \cdot \binom{19}{6}$.
\end{exercise}

\begin{solution}
    
    (a) A way to compute this is to compute the possible ways in which a student can pick 7 courses, \textit{none} of which is statistics courses, and then subtracting it from the total number of choices.
    Picking 7 courses with no statistics ones means selecting 7 distinct courses from a pool of 20 - 5 = 15.
    The total number of choices ---without constraints--- can be computed as choosing 7 out of 20.
    This means that the number of choices for completing the degree is:

    \[\binom{20}{7} - \binom{15}{7} = \frac{1}{7!}(\frac{20!}{13!} - \frac{15!}{8!}) = \frac{1}{7!}(20 \cdot 19 \cdot \ldots \cdot 14 - 15 \cdot 14 \cdot \ldots \cdot 9) = 71,085\]

    (b) The expression here arises from the following line of thought: first, pick one statistics course ($\binom{5}{1}$ ways to do this), and then pick 6 more courses out of the remaining 19 ones.
    However, this results in double counting: order does not matter here, but picking, for example, statistics course \#1 as the mandatory one, and then statistics course \#2 as the first elective will be counted separately from picking statistics course \#2 as the mandatory one and statistics course \#1 as the first elective.
\end{solution}

\begin{exercise}{12}
    Four players, named A, B, C, D, are playing a card game.
    A standard, well-shuffled deck of cards is dealt to the players (so each player receives a 13-card hand).

    (a) How many possibilities are there for the hand that player A will get? (Within a hand, the order in which cards were received doesn't matter).

    (b) How many possibilities are there overall for what hands everyone will get, assuming that it matters which player gets which hand, but not the order of cards within a hand?
\end{exercise}

\begin{solution}
    
    (a) This is simply $\binom{52}{13}$: we choose 13 cards out of 52, without repetition, and without the order mattering.

    (b) We can compute this by fixing the order in which we examine the players as, say, A, B, C, D.
    For player A, there are $\binom{52}{13}$ possible hands.
    For each of these hands, there remain 52 - 13 = 39 cards out of which the 13 cards for player B are picked.
    We continue this way (and using the multiplication rule) to compute the possible number of hands for everyone as:

    \[\binom{52}{13} \cdot \binom{39}{13} \cdot \binom{26}{13} \cdot \binom{13}{13} = \binom{52}{13} \cdot \binom{39}{13} \cdot \binom{26}{13}\]
\end{solution}

\begin{exercise}{13}
    A certain casino uses 10 standard decks of cards mixed together into one big deck, which we will call a \textit{superdeck}.
    Thus, the superdeck has $52 \cdot 10 = 520$ cards, with 10 copies of each card.
    How many different 10-card hands can be dealt from the superdeck?
    The order of the cards does not matter, nor does it matter which of the original 10 decks the cards came from.
    Express your answer as a binomial coefficient.
    [Hint: Bose-Einstein.]
\end{exercise}

\begin{solution}
    
    The Bose-Einstein counting problem asks how many ways are there to choose $k$ times from a set of $n$ objects with replacement, if order doesn't matter.
    Consider thinking about the problem here as drawing 10 times from a deck of 52 cards, noting down the card we drew and then putting it back for the next draw.
    We can then map results of this experiment bijectively to results of the experiment in the exercise: drawing card $i$ from deck $j$ corresponds to drawing card $i$ on the $j$-th trial.
    We then see that the number of possible hands corresponds to choosing 10 times from the deck, \textit{with} replacement, and \textit{without} order mattering, which by the Bose-Einstein solution gives:

    \[\binom{52 + 10 - 1}{10}\]
\end{solution}

\section{Story Proofs}

\begin{exercise}{15}
    Give a story proof that $\sum_{k=0}^{n} \binom{n}{k} = 2^n$.
\end{exercise}

\begin{solution}
    
    Imagine having a set of $n$ distinct objects and wanting to count the number of possible subsets.
    As we already know, this is equal to $2^n$ (for each object, choose to either include it or not in a subset).
    Another equivalent way of counting this would be to count all possible subsets of size $0, 1, 2, \ldots, n$ and sum the resulting quantities.
    We don't care about the order of object selection, so the number of ways to choose a subset of size $k$ is $\binom{n}{k}$, which means that summing $\sum_{k=0}^{n} \binom{n}{k}$ must equal $2^n$.
\end{solution}

\newpage

\begin{exercise}{16}
    Show that for all positive integers $n$ and $k$ with $n \geq k$,

    \[\binom{n}{k} + \binom{n}{k - 1} = \binom{n + 1}{k},\]

    doing this in two ways: (a) algebraically and (b) with a story, giving an interpretation for why both sides count the same thing.

    Hint for the story proof: Imagine an organization consisting of $n + 1$ people, with one of them pre-designated as the president of the organization.
\end{exercise}

\begin{solution}

    (a) For an algebraic proof, notice that, from previous identities and some calculations:

    \[\binom{n}{k} + \binom{n}{k - 1} = \binom{n}{n - k} + \binom{n}{n - k + 1} = \frac{n!}{(n - k)! \cdot k!} + \frac{n!}{(k - 1)! \cdot (n - k + 1)!}\]
    \[= \frac{n!}{(k - 1)!}\Bigl(\frac{1}{k(n - k)!} + \frac{1}{(n - k + 1)!}\Bigr) = \frac{n!}{(k - 1)!(n - k)!}\Bigl(\frac{1}{k} + \frac{1}{n - k + 1}\Bigr)\]
    \[= \frac{n!}{(k - 1)!(n - k )!}\cdot \frac{n + 1}{k(n - k + 1)} = \frac{(n + 1)!}{k!\cdot(n - k + 1)!} = \binom{n+1}{k}\]

    (b) For a story proof, think about it as follows.
    We want to choose a commitee of $k$ people from a total of $n + 1$, which is clearly equal to the RHS.
    Another way of counting the possible ways to do this, is by choosing a pre-designated ``president'' of the commitee, and the remaining $k - 1$ members separately.
    Fix any president, which results in having to choose $k - 1$ members from $n - 1$ people ($\binom{n}{k - 1}$ ways).
    Notice that this misses all commitees in which this particular person is not present at all: this is equal to the number of ways to choose $k$ members from the remaining $n$ people ($\binom{n}{k}$).
    The sum of these two counts must equal precisely the number of possible commitees.
    Notice, also, that in the second count we didn't have to utilize the ``president'' argument.
\end{solution}